<div class="stats-cards">
    <a class="card" [routerLink]="'/sale-list'">
        <span class="material-icons">point_of_sale</span>
        <div>
            <span>Ventas Totales</span>
            <strong>S/. {{ totalSales | number:'1.2-2' }}</strong>
        </div>
    </a>

    <a class="card" [routerLink]="'/product-list'">
        <span class="material-icons">inventory_2</span>
        <div>
            <span>Inventario Actual</span>
            <strong>{{ activeProductCount }}</strong>
        </div>
    </a>


    <a class="card" [routerLink]="'/purchase-list'">
        <span class="material-icons">shopping_cart</span>
        <div>
            <span>Compras Registradas</span>
            <strong>{{ purchaseCount }}</strong>
        </div>
    </a>


    <a class="card" [routerLink]="'/supplier-list'">
        <span class="material-icons">local_shipping</span>
        <div>
            <span>Proveedores</span>
            <strong>{{ supplierCount }}</strong>
        </div>
    </a>
</div>

<div class="middle-section">
    <div class="sales-graph">
        <h3>Gráfico de ventas</h3>
        <div class="bar-chart">
            <div *ngFor="let day of salesData" class="bar-wrapper">
                <div class="bar" [style.height.%]="day.total"></div>
                <span>{{ day.day }}</span>
            </div>
        </div>
    </div>

    <mat-card class="notification-card">
        <div class="notification-header">
            <mat-icon>notifications</mat-icon>
            <h2>Notificaciones</h2>
        </div>

        <div class="notification-body">
            <mat-list *ngIf="notifications.length; else sinNotificaciones">
                <mat-list-item *ngFor="let notif of notifications; let i = index" class="notification-item">
                    <mat-icon matListIcon [color]="notif.color">{{ notif.icon }}</mat-icon>

                    <div class="notification-content">
                        <div class="title">{{ notif.title }}</div>
                        <div class="message mat-caption">{{ notif.message }}</div>
                    </div>

                    <button mat-icon-button class="close-btn" (click)="removeNotification(i)">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-list-item>
            </mat-list>

            <ng-template #sinNotificaciones>
                <p class="mat-body-2">No hay notificaciones por el momento.</p>
            </ng-template>
        </div>
    </mat-card>


    <div class="tables-section">
        <div class="table">
            <h4>Últimas ventas</h4>
            <table mat-table [dataSource]="lastSales" class="mat-elevation-z1">
                <ng-container matColumnDef="product">
                    <th mat-header-cell *matHeaderCellDef>Producto</th>
                    <td mat-cell *matCellDef="let element">{{ element.product }}</td>
                </ng-container>

                <ng-container matColumnDef="quantity">
                    <th mat-header-cell *matHeaderCellDef>Cantidad</th>
                    <td mat-cell *matCellDef="let element">{{ element.quantity }}</td>
                </ng-container>

                <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef>Fecha</th>
                    <td mat-cell *matCellDef="let element">{{ element.date }}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="salesColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: salesColumns;"></tr>
            </table>
        </div>

        <div class="table">
            <h4>Últimas compras</h4>
            <table mat-table [dataSource]="lastPurchases" class="mat-elevation-z1">
                <ng-container matColumnDef="product">
                    <th mat-header-cell *matHeaderCellDef>Producto</th>
                    <td mat-cell *matCellDef="let element">{{ element.product }}</td>
                </ng-container>

                <ng-container matColumnDef="quantity">
                    <th mat-header-cell *matHeaderCellDef>Cantidad</th>
                    <td mat-cell *matCellDef="let element">{{ element.quantity }}</td>
                </ng-container>

                <ng-container matColumnDef="amount">
                    <th mat-header-cell *matHeaderCellDef>Monto</th>
                    <td mat-cell *matCellDef="let element">{{ element.amount | currency:'PEN' }}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="purchaseColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: purchaseColumns;"></tr>
            </table>
        </div>
    </div>